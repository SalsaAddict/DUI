"use strict";var angular=require("angular"),moment=require("moment"),DUI,dui;(function(n){function t(n){return n===undefined?!0:n===null?!0:n===NaN?!0:n==={}?!0:n===[]?!0:String(n).trim().length===0?!0:!1}function i(n,i){return i===void 0&&(i=undefined),t(n)?i:n}function r(n,t,r){var u,f;return t===void 0&&(t=""),r===void 0&&(r=[]),u=angular.lowercase(String(n)).trim(),r.length>0&&(f=!1,angular.forEach(r,function(n){angular.lowercase(n).trim()===u&&(f=!0)}),f||(u=undefined)),i(u,angular.lowercase(i(t,"")).trim())}function u(n,t){if(!angular.isUndefined(n[t]))return r(n[t],"true")==="false"?void 0:!0}var f,e,o,s,h,c;n.IsBlank=t;n.IfBlank=i;n.Option=r;n.BooleanAttr=u,function(n){var r=function(){function n(n,r,u){var f=this;this.$locale=n;this.$filter=r;this.$log=u;this.integerParser=function(n){var i,r;if(!t(n))return(i=String(n).replace(/\s/g," ").replace(new RegExp("\\"+f.$locale.NUMBER_FORMATS.GROUP_SEP,"g"),","),!(/^((?:[-+]?[1-9]\d{0,2})(?:(?:(?:\d{3})*)|(?:(?:\,\d{3})*)))$/.test(i)||i==="0"))?void 0:(r=parseInt(i.replace(/\,/g,""),10),isNaN(r)?undefined:r)};this.integerFormatter=function(n){var t=Number(String(n));return isNaN(t)?undefined:f.$filter("number")(t,0)};this.decimalParser=function(n){var r,u,e;if(!t(n))return(r=String(n).split(f.$locale.NUMBER_FORMATS.DECIMAL_SEP),r.length>2)?void 0:(u=f.integerParser(r[0]),t(u))?void 0:(r.length=2)&&!/^(\d{2})$/.test(r[1])?void 0:(e=parseFloat(String(u)+"."+i(r[1],"00")),isNaN(e)?undefined:e)};this.decimalFormatter=function(n){var t=Number(String(n));return isNaN(t)?undefined:f.$filter("number")(t,2)}}return n.$inject=["$locale","$filter","$log"],n}();n.Service=r}(f=n.Locale||(n.Locale={})),function(n){function u(){var n=function(n,i,u){return{restrict:"E",templateUrl:"duiForm.html",transclude:!0,scope:{heading:"@",subheading:"@",loadProc:"@load",saveProc:"@save",deleteProc:"@delete",backRoute:"@back"},controller:r,controllerAs:"duiFormCtrl",require:"duiForm",link:function(r,f,e,o){Object.defineProperties(r,{isEditable:{get:function(){return!t(r.saveProc)}},isDeletable:{get:function(){return!t(r.deleteProc)}},hasError:{get:function(){return r.form.$dirty&&r.form.$invalid}}});r.back=function(){t(r.backRoute)?n.history.back():i.path(r.backRoute)};r.undo=function(){u.reload()};o.hasTabs&&o.activateFirstTab()}}};return n.$inject=["$window","$location","$route","$filter","$log"],n}var r=function(){function n(n,r,u,f,e){var o=this;this.$scope=n;this.$window=r;this.$route=u;this.$filter=f;this.$log=e;this.tabs=[];this.addTab=function(n,t){return o.tabs.push(Object.create(null,{heading:{get:function(){return n}},sort:{get:function(){return t}},active:{value:!1,writable:!0}})),o.tabs[o.tabs.length-1]};this.removeTab=function(n){var t=o.tabs.indexOf(n);t>=0&&o.tabs.splice(t,1)};this.activateTab=function(n){if(angular.forEach(o.tabs,function(n){n.active=!1}),n.active=!0,!t(o.$route.current.name)){var r=angular.fromJson(i(o.$window.localStorage.getItem("savedTabs"),"{}"));r[o.$route.current.name]=n.heading;o.$window.localStorage.setItem("savedTabs",angular.toJson(r))}};this.activateFirstTab=function(){var u=!1,n,r;t(o.$route.current.name)||(n=angular.fromJson(i(o.$window.localStorage.getItem("savedTabs"),"{}")),t(n)||(r=n[o.$route.current.name],t(r)||angular.forEach(o.tabs,function(n){n.heading===r&&(o.activateTab(n),u=!0)})));u||o.activateTab(o.$filter("orderBy")(o.tabs,"sort")[0])}}return Object.defineProperty(n.prototype,"hasTabs",{get:function(){return this.tabs.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDirty",{get:function(){return this.$scope.form.$dirty},enumerable:!0,configurable:!0}),n.$inject=["$scope","$window","$route","$filter","$log"],n}();n.Controller=r;n.DirectiveFactory=u}(e=n.Form||(n.Form={})),function(n){function t(){return function(){return{restrict:"E",templateUrl:"duiFormTab.html",transclude:!0,scope:{heading:"@",sort:"@"},require:"^^duiForm",link:function(n,t,i,r){var u=r.addTab(n.heading,parseInt(n.sort,10));Object.defineProperty(u,"hasError",{get:function(){return r.isDirty&&n.form.$invalid}});Object.defineProperty(n,"isActive",{get:function(){return u.active}});n.$on("$destroy",function(){r.removeTab(u);u=undefined})}}}}n.DirectiveFactory=t}(o=n.FormTab||(n.FormTab={})),function(n){function t(){return function(){return{restrict:"E",templateUrl:"duiLabel.html",transclude:!0,scope:{text:"@"},require:"^^duiForm",link:function(n,t,i,r){Object.defineProperty(n,"hasError",{get:function(){return(r.isDirty||n.form.$dirty)&&n.form.$invalid}})}}}}n.DirectiveFactory=t}(s=n.Label||(n.Label={})),function(n){function t(){var n=function(n){return{restrict:"A",require:"ngModel",link:function(t,i,r,u){i.hasClass("form-control")||i.addClass("form-control");switch(r.duiInput){case"integer":i.attr("placeholder",n.integerFormatter(9999).replace(/\9/g,"#"));u.$formatters.unshift(n.integerFormatter);u.$parsers.unshift(n.integerParser);break;case"decimal":i.attr("placeholder",n.decimalFormatter(9999.99).replace(/\9/g,"#"));u.$formatters.unshift(n.decimalFormatter);u.$parsers.unshift(n.decimalParser)}}}};return n.$inject=["duiLocale"],n}n.DirectiveFactory=t}(h=n.Input||(n.Input={})),function(n){function i(){var n=function(n){return{restrict:"E",templateUrl:"duiDate.html",scope:{ngModel:"=ngModel"},link:function(i,r,f){Object.defineProperties(i,{format:{get:function(){switch(n.id){case"en-us":return"MM/dd/yyyy";default:return"dd/MM/yyyy"}}},placeholder:{get:function(){return angular.lowercase(i.format)}},isOpen:{value:!1,writable:!0},isRequired:{get:function(){return u(f,"required")}}});i.uibModel=t(i.ngModel)?undefined:moment(i.ngModel).toDate();var e=i.$watch("ngModel",function(n,r){if(n!==r){var u=t(i.ngModel)?undefined:moment(i.ngModel).toDate(),f=t(i.uibModel)?undefined:moment(i.uibModel).toDate();u!==f&&(i.uibModel=u)}}),o=i.$watch("uibModel",function(n,r){if(n!==r){var f=t(i.ngModel)?undefined:moment(i.ngModel).format("YYYY-MM-DD"),u=t(i.uibModel)?undefined:moment(i.uibModel).format("YYYY-MM-DD");f!==u&&(i.ngModel=u)}});i.$on("$destroy",function(){e();o()})}}};return n.$inject=["$locale"],n}n.DirectiveFactory=i}(c=n.DateField||(n.DateField={}))})(DUI||(DUI={}));dui=angular.module("dui",["ngRoute","ui.bootstrap"]);dui.service("duiLocale",DUI.Locale.Service);dui.directive("duiForm",DUI.Form.DirectiveFactory());dui.directive("duiFormTab",DUI.FormTab.DirectiveFactory());dui.directive("duiLabel",DUI.Label.DirectiveFactory());dui.directive("duiDate",DUI.DateField.DirectiveFactory());dui.directive("duiInput",DUI.Input.DirectiveFactory());dui.run(["$locale","$log",function(n){moment.locale(n.id)}]);
//# sourceMappingURL=dui-core.min.js.map
